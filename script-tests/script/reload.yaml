test:
  disabled: true

# Cleanup steps
cleanup:
  steps:
    - include:
        script: common.yaml

# Setup steps
setup:
  steps:
    - include:
        script: common.yaml

# Game steps
game:
  steps:
    - include:
        script: common.yaml

    # run-game should call startGame graphql to make game.status as ACTIVE
    # call /internal/update-table-status to mark table_status as GAME_RUNNING       
    - run-game:
      - club: New Delhi
        game: test1

    # player reloads 100 chips
    - reload:
      - club: New Delhi
        game: test1
        players:
        - name: arun
          amount: 100

    - verify-player-game-stack:
        - club: New Delhi
          game: test1
          players:
          - name: arun
            balance: 100
          - name: sam
            balance: 100
          - name: bala
            balance: 100
          - name: arjun
            balance: 100

    - process-pending-updates:
      - club: New Delhi
        game: test1

    - verify-player-game-stack:
        - club: New Delhi
          game: test1
          players:
          - name: arun
            balance: 200
          - name: sam
            balance: 100
          - name: bala
            balance: 100
          - name: arjun
            balance: 100

    - reload:
      - club: New Delhi
        game: test1
        players:
        - name: sam
          amount: 500

    - verify-player-game-stack:
        - club: New Delhi
          game: test1
          players:
          - name: arun
            balance: 200
          - name: sam
            balance: 300
          - name: bala
            balance: 100
          - name: arjun
            balance: 100

    